{% extends "base.html" %}

{% block title %}Register - Municipal Services{% endblock %}

{% block content %}
    <section class="hero" style="min-height: 100vh; padding-top: 100px;">
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
        <div class="container">
            <div class="contact-content" style="max-width: 650px; margin: 0 auto;">
                <h2 class="section-title fade-in" style="color: white;">Create Account</h2>
                <p class="fade-in" style="color: rgba(255,255,255,0.9); margin-bottom: 2rem;">Register to start submitting and tracking municipal complaints</p>
                
                <form class="auth-form fade-in" method="POST" action="{{ url_for('register') }}" id="registerForm">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" name="name" placeholder="Enter your full name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" placeholder="your.email@example.com" required>
                        <small style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">We'll never share your email</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" placeholder="+1 234 567 8900" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="password">Password *</label>
                            <input type="password" id="password" name="password" placeholder="Minimum 8 characters" required>
                            <small style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">Must be at least 8 characters</small>
                        </div>
                        <div class="form-group">
                            <label for="confirm_password">Confirm Password *</label>
                            <input type="password" id="confirm_password" name="confirm_password" placeholder="Re-enter password" required>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">Create Account</button>
                </form>
                
                <p style="text-align: center; margin-top: 2rem; color: rgba(255,255,255,0.8);">
                    Already have an account? <a href="{{ url_for('login') }}" style="color: white; text-decoration: underline; font-weight: 600;">Login here</a>
                </p>
            </div>
        </div>
    </section>
{% endblock %}

{% block extra_js %}
<style>
    .contact-content { max-width: 460px; } /* enforce the narrower container */

    .auth-form {
        display: grid;
        gap: 1rem;               /* reduced vertical spacing */
        margin-top: 2rem;
    }
    .auth-form .form-group {
        display: grid;
        gap: 0.5rem;
        text-align: left;
    }
    .auth-form .form-group label {
        font-weight: 500;
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.9rem;
    }
    .auth-form .form-group input {
        padding: 0.9rem;                      /* reduced input height */
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.08);
        color: var(--text-light);
        font-family: inherit;
        font-size: 0.95rem;
        transition: all 0.25s;
        backdrop-filter: blur(8px);
    }
    .auth-form .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;       /* keep two columns on wide screens */
        gap: 0.75rem;
    }

    .auth-form .form-group input:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.12);
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.08);
    }
    .auth-form .form-group input::placeholder {
        color: rgba(255, 255, 255, 0.5);
    }

    /* Responsive: stack fields on small screens and reduce container padding */
    @media (max-width: 600px) {
        .auth-form .form-row { grid-template-columns: 1fr; }
        .contact-content { margin: 0 1rem; padding: 0.75rem; }
        .auth-form .form-group input { padding: 0.85rem; }
    }
</style>
<script>
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm_password').value;
        
        if (password !== confirmPassword) {
            e.preventDefault();
            alert('Passwords do not match!');
            document.getElementById('confirm_password').focus();
            return false;
        }
        
        if (password.length < 8) {
            e.preventDefault();
            alert('Password must be at least 8 characters long!');
            document.getElementById('password').focus();
            return false;
        }
        
        // Let the form submit normally
        return true;
    });
</script>
{% endblock %}

